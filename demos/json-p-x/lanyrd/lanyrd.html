<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
   <title>Lanyrd Events</title>
   <link rel="stylesheet" href="http://yui.yahooapis.com/2.8.0r4/build/reset-fonts-grids/reset-fonts-grids.css" type="text/css"/>
   <link rel="stylesheet" href="http://yui.yahooapis.com/2.7.0/build/base/base.css" type="text/css"/>
   <link rel="stylesheet" href="style.css" type="text/css"/>
</head>
<body>
<div id="doc" class="yui-t7">
   <div id="hd" role="banner"><h1>Showing off your past Lanyrd Events as a Badge with YQL Localcache</h1></div>
   <div id="bd" role="main">
	<div class="yui-g">
        <p id="spoken"><a href="http://lanyrd.com/people/codepo8">Spoken conferences</a></p>
      </div><!-- end div -->
	<div class="yui-g">
<pre><code>
yqlcache.get({
   yql: 'select * from html where url="http://lanyrd.com/people/codepo8" and xpath="//h2[contains(.,\'Past\')]/.."',
   id: 'spokenconference',
   cacheage: (60*60*1000),
   callback: function(o) {
      if(window.console) {console.log(o);}      
      var res = o.data; 
      res = res.replace(/class="split first"/,'id="spoken"');  
      res = res.replace(/spoken at/,'');
      res = res.replace(/href="/gi,'href="http://lanyrd.com');
      var spoken = document.getElementById('spoken');
      var first = spoken.firstChild;
          first.parentNode.removeChild(first);
      var newDiv = document.createElement('div');
          newDiv.innerHTML = res;
          spoken.appendChild(newDiv);       
   } 
});
</code></pre>  
</div><!-- end div -->
</div><!-- end main -->
<div id="ft" role="contentinfo"><p>Written by @<a href="http://twitter.com/thinkphp">thinkphp</a></p></div>
</div><!-- end doc -->
<script type="text/javascript" src="yqlcache.js"></script>
<script type="text/javascript">
yqlcache.get({
   yql: 'select * from html where url="http://lanyrd.com/people/codepo8" and xpath="//h2[contains(.,\'Past\')]/.."',
   id: 'spokenconference',
   cacheage: (60*60*1000),
   callback: function(o) {
      if(window.console) {console.log(o);}      
      var res = o.data; 
      res = res.replace(/class="split first"/,'id="spoken"');  
      res = res.replace(/spoken at/,'');
      res = res.replace(/href="/gi,'href="http://lanyrd.com');
      var spoken = document.getElementById('spoken');
      var first = spoken.firstChild;
          first.parentNode.removeChild(first);
      var newDiv = document.createElement('div');
          newDiv.innerHTML = res;
          spoken.appendChild(newDiv);       
   } 
});
</script>
</body>
</html>